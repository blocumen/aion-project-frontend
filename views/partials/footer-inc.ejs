</div>

</div>
</div>
<div class="sidebar-overlay" data-reff="#sidebar"></div>


<div id="changePasswordModel" class="modal custom-modal fade" role="dialog">
	<div class="modal-dialog">
		<button type="button" class="close" data-dismiss="modal">&times;</button>
		<div class="modal-content modal-lg">
			<div class="modal-header">
				<h4 class="modal-title">Change Password</h4>
			</div>
			<div class="modal-body">
				<form id="changepassword">
					<div class="form-group">
						<label>Old Password<span class="text-danger">*</span></label>
						<input class="form-control" name="oldPassword" id="oldPassword" type="password">
					</div>
					<div class="form-group">
						<label>New Password <span class="text-danger">*</span></label>
						<input class="form-control" name="newPassword" id="newPassword" type="password">
					</div>
					<div class="form-group">
						<label>Confirm Password <span class="text-danger">*</span></label>
						<input class="form-control" name="confirmPassword" id="confirmPassword" type="password">
					</div>

					<div class="m-t-20 text-center">
						<button type="button" class="btn btn-primary" onclick="savePassword();" id="changeButton">Change</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>


<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.js"></script>
<script type="text/javascript" src="/public/js/jquery-3.2.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="/public/js/notify.js"></script>
<script type="text/javascript" src="/public/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/public/js/bootstrap-timepicker.min.js"></script>
<script type="text/javascript" src="/public/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="/public/js/dataTables.bootstrap.min.js"></script>
<script type="text/javascript" src="/public/js/jquery.slimscroll.js"></script>
<script type="text/javascript" src="/public/js/select2.min.js"></script>
<script type="text/javascript" src="/public/js/moment.min.js"></script>
<script type="text/javascript" src="/public/js/bootstrap-datetimepicker.min.js"></script>
<script type="text/javascript" src="/public/plugins/morris/morris.min.js"></script>
<script type="text/javascript" src="/public/plugins/raphael/raphael-min.js"></script>
<script type="text/javascript" src="/public/js/jquery.dropdown.js"></script>
<script type="text/javascript" src="/public/js/app.js"></script>
<script type="text/javascript" language="javascript" src="//cdn.datatables.net/select/1.2.5/js/dataTables.select.min.js"></script>

<script src="https://cdn.datatables.net/buttons/1.5.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.flash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.print.min.js"></script>
<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script> -->

<script type="text/javascript">

	$('#changePasswordModel').on('hide.bs.modal', function(){
		$(this)
		.find("input")
		.val('');
	});

	function changePassword() {
		$("#changePasswordModel").modal("show");
	}

	function savePassword() {

		if($("#newPassword").val() != $("#confirmPassword").val()) {
			Notify("New password and confirm password not match.", null, null, 'danger');
			return false;
		}

		var changePassword = $("#changepassword").serialize();
		$.ajax({
			'url'  :'/auth/changepassword',
			'type' :'post',
			'dataType' : 'json',
			'data' : changePassword,
			success : function(response) {
				console.log(response);
				if(response.status === true)
				{
					$('#changePasswordModel').modal('hide');

					swal({
						title: 'Done!',
						text: "Password Changed Successfully",
						type: 'success',
						timer: 2000,
						showCancelButton: false,
						showConfirmButton: false,
					}).then(
						function () {},
						// handling the promise rejection
						function (dismiss) {
							if (dismiss === 'timer') {
								console.log('I was closed by the timer');
							}
						}
					);

				} else {
					for(var i=0; i<response.message.length; i++) {
						Notify(response.message[i].msg, null, null, 'danger');
					}
				}
			},
			error : function(error) {
				console.log(error);
			}
		});
	}

</script>
</body>
</html>
